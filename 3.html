<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>3 - Listing</title>
<link rel="icon" href="data:,">
<style>
  :root{--bg:#081322;--fg:#eaf2ff;--muted:#9fb0d8;--accent:#2b7de9}
  body{margin:0;padding:18px;font-family:Inter,system-ui;background:var(--bg);color:var(--fg)}
  .wrap{max-width:980px;margin:0 auto}
  .card{background:linear-gradient(180deg,#071224,#05101c);padding:16px;border-radius:12px}
  label{display:block;margin-top:10px;color:var(--muted)}
  input,textarea{width:100%;padding:10px;border-radius:9px;border:1px solid rgba(255,255,255,.04);background:transparent;color:var(--fg)}
  textarea{min-height:120px}
  .chip{display:inline-block;background:rgba(255,255,255,.03);padding:6px 8px;border-radius:999px;margin:6px 6px 0 0;color:var(--muted)}
  .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
  .btn{padding:9px 12px;border-radius:10px;border:0;background:var(--accent);color:white;cursor:pointer}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,.06)}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>3 of 5 — Listing content</h1>
    <label>Short Description (one-liner)
      <input id="shortDesc" maxlength="120" placeholder="One short line that hooks users" />
    </label>
    <label>Long Description
      <textarea id="longDesc" placeholder="Write about your app features, privacy, offline use, etc."></textarea>
      <div style="margin-top:6px;color:var(--muted)"><span id="wordCount">0 words</span></div>
    </label>

    <label>Top features
      <div style="display:flex;gap:8px;margin-top:6px">
        <input id="featureInput" placeholder="Type feature and press Add" />
        <button class="btn" id="addFeature">Add</button>
      </div>
      <div id="featuresArea" style="margin-top:8px"></div>
    </label>

    <label>Keywords / Tags (comma separated)
      <input id="keywords" placeholder="notes, vtu, study, pdf" />
    </label>

    <div class="row" style="justify-content:space-between">
      <div><button class="btn ghost" id="back">← Back</button></div>
      <div>
        <button class="btn ghost" id="clear">Clear</button>
        <button class="btn" id="next">Next →</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const shortDesc = document.getElementById('shortDesc'), longDesc = document.getElementById('longDesc');
  const featuresArea = document.getElementById('featuresArea'), featureInput = document.getElementById('featureInput');

  const allRaw = localStorage.getItem('wizard_all'); let all = allRaw ? JSON.parse(allRaw) : {};
  if(all.shortDesc) shortDesc.value = all.shortDesc;
  if(all.longDesc) longDesc.value = all.longDesc;
  let features = Array.isArray(all.features)?all.features.slice():[];

  function renderFeatures(){
    featuresArea.innerHTML='';
    features.forEach((f,i)=>{
      const sp = document.createElement('span'); sp.className='chip'; sp.textContent = f + '  ✕';
      sp.style.cursor='pointer';
      sp.addEventListener('click', ()=> { features.splice(i,1); renderFeatures(); });
      featuresArea.appendChild(sp);
    });
  }
  renderFeatures();

  function updateWordCount(){ const c = (longDesc.value||'').trim().split(/\s+/).filter(Boolean).length; document.getElementById('wordCount').textContent = `${c} words`; }
  longDesc.addEventListener('input', updateWordCount); updateWordCount();

  document.getElementById('addFeature').addEventListener('click', ()=>{
    const v = featureInput.value.trim(); if(!v) return; features.push(v); featureInput.value=''; renderFeatures();
  });

  document.getElementById('next').addEventListener('click', ()=>{
    all.shortDesc = shortDesc.value; all.longDesc = longDesc.value; all.features = features;
    all.keywords = document.getElementById('keywords').value;
    localStorage.setItem('wizard_all', JSON.stringify(all));
    localStorage.setItem('wizard_step3', JSON.stringify({shortDesc:all.shortDesc,longDesc:all.longDesc,features:all.features,keywords:all.keywords}));
    location.href='4.html';
  });
  document.getElementById('back').addEventListener('click', ()=> location.href='2.html');
  document.getElementById('clear').addEventListener('click', ()=> { if(!confirm('Clear listing fields?')) return; shortDesc.value=''; longDesc.value=''; features=[]; document.getElementById('keywords').value=''; renderFeatures(); updateWordCount(); });
})();
</script>
</body>
</html>
